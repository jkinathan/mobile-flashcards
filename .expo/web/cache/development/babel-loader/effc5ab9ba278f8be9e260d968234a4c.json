{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Styles from \"../utilities/styles\";\nimport { AnswerQuestion, ANSWER_KEY, ClearAnswer } from \"../utilities/api\";\nimport { useState, useEffect } from \"react\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { setLocalNotification, clearLocalNotification } from \"../utilities/helpers\";\n\nvar StartQuiz = function StartQuiz(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      displayResult = _useState2[0],\n      setDisplayResult = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fromDb = _useState4[0],\n      setFromDb = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      index = _useState6[0],\n      setIndex = _useState6[1];\n\n  var deck = route.params.deck.deck;\n  var QuestionList = route.params.deck.questions;\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      displayQuestion = _useState8[0],\n      setDisplayQuestion = _useState8[1];\n\n  useEffect(function () {\n    console.log(\"My answer key\", QuestionList.length);\n\n    function usingAsync() {\n      var value, data, returnVal;\n      return _regeneratorRuntime.async(function usingAsync$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(ANSWER_KEY));\n\n            case 3:\n              value = _context.sent;\n              data = JSON.parse(value);\n\n              if (data != null) {\n                returnVal = Object.keys(data).filter(function (value) {\n                  return value.split(\" \")[0] === route.params.deck.title;\n                }).map(function (s) {\n                  return data[s];\n                });\n                setFromDb(Object.values(returnVal));\n\n                if (Object.keys(returnVal).length === QuestionList.length) {\n                  setDisplayResult(true);\n                } else if (Object.keys(returnVal).length > 0) {\n                  setIndex(Object.keys(returnVal).length);\n                }\n              } else {\n                console.log(\"Your data value is Null\");\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"Error is:\", _context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    }\n  }, []);\n  var selectedQuestion;\n\n  if (QuestionList.length !== 0) {\n    selectedQuestion = QuestionList[index];\n  }\n\n  var handleReset = function handleReset() {\n    ClearAnswer(route.params.deck.title);\n    setDisplayResult(false);\n    setFromDb([]);\n    setIndex(0);\n  };\n\n  var handleAnswer = function handleAnswer(text) {\n    AnswerQuestion({\n      deck: route.params.deck.title,\n      question: selectedQuestion.question,\n      passed: text\n    });\n    var data = fromDb;\n\n    if (data) {\n      data.push(text);\n      setFromDb(data);\n    }\n\n    if (index + 1 === QuestionList.length) {\n      setDisplayResult(true);\n      clearLocalNotification();\n      setLocalNotification();\n    } else {\n      setIndex(index + 1);\n    }\n  };\n\n  return React.createElement(View, {\n    style: Styles.main\n  }, QuestionList.length === 0 ? React.createElement(View, {\n    style: Styles.VerticalAlignCenter\n  }, React.createElement(Text, {\n    style: Styles.deckTexts\n  }, \"Sorry You can not take a quiz, because there are no cards in the deck\")) : displayResult ? React.createElement(View, {\n    style: {\n      flex: 1\n    }\n  }, React.createElement(View, {\n    style: Styles.VerticalAlignCenter\n  }, React.createElement(Text, {\n    style: Styles.deckTexts\n  }, \"passed\", \" \" + JSON.stringify(fromDb.filter(function (s) {\n    return s === true;\n  }).length), \"/\", JSON.stringify(fromDb.length)), React.createElement(View, {\n    style: {\n      marginTop: 50\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: handleReset\n  }, React.createElement(Text, {\n    style: Styles.button\n  }, \"Restart Quiz\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"DeckDetail\", {\n        deck: route.params.deck\n      });\n    }\n  }, React.createElement(Text, {\n    style: [Styles.button, {\n      color: \"gray\",\n      borderColor: \"gray\"\n    }]\n  }, \"Back to Deck\"))))) : React.createElement(View, {\n    style: {\n      flex: 1\n    }\n  }, React.createElement(Text, null, index + 1, \"/\", QuestionList.length), React.createElement(View, {\n    style: Styles.VerticalAlignCenter\n  }, displayQuestion ? React.createElement(Text, {\n    style: Styles.deckTexts\n  }, selectedQuestion.question) : React.createElement(Text, {\n    style: Styles.deckTexts\n  }, selectedQuestion.answer), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return setDisplayQuestion(!displayQuestion);\n    }\n  }, displayQuestion ? React.createElement(Text, {\n    style: Styles.subButton\n  }, \"Answer\") : React.createElement(Text, {\n    style: Styles.subButton\n  }, \"question\"))), React.createElement(View, {\n    style: {\n      marginBottom: 50\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return handleAnswer(true);\n    }\n  }, React.createElement(Text, {\n    style: Styles.button\n  }, \"Correct\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return handleAnswer(false);\n    }\n  }, React.createElement(Text, {\n    style: [Styles.button, {\n      color: \"red\",\n      borderColor: \"red\"\n    }]\n  }, \"Incorrect\")))));\n};\n\nexport default StartQuiz;","map":{"version":3,"sources":["/home/kinathan/Desktop/retribution/mobile-flashcards/components/Quiz.js"],"names":["React","Styles","AnswerQuestion","ANSWER_KEY","ClearAnswer","useState","useEffect","TouchableOpacity","AsyncStorage","setLocalNotification","clearLocalNotification","StartQuiz","route","navigation","displayResult","setDisplayResult","fromDb","setFromDb","index","setIndex","deck","params","QuestionList","questions","displayQuestion","setDisplayQuestion","console","log","length","usingAsync","getItem","value","data","JSON","parse","returnVal","Object","keys","filter","split","title","map","s","values","selectedQuestion","handleReset","handleAnswer","text","question","passed","push","main","VerticalAlignCenter","deckTexts","flex","stringify","marginTop","button","navigate","color","borderColor","answer","subButton","marginBottom"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { View, Text } from \"react-native\";\nimport Styles from \"../utilities/styles\";\nimport { AnswerQuestion, ANSWER_KEY,ClearAnswer } from \"../utilities/api\";\nimport { useState, useEffect } from \"react\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { setLocalNotification,clearLocalNotification } from \"../utilities/helpers\";\n\n\n\nconst StartQuiz = ({ route, navigation }) => {\n  const [displayResult, setDisplayResult] = useState(false);\n  const [fromDb, setFromDb] = useState(null);\n  const [index, setIndex] = useState(0);\n  const { deck } = route.params.deck;\n  const QuestionList = route.params.deck.questions;\n  const [displayQuestion, setDisplayQuestion] = useState(true);\n\n  \n  useEffect(() => {\n      \n    console.log(\"My answer key\",QuestionList.length);\n\n    async function usingAsync(){\n  \n      try {\n         let value = await AsyncStorage.getItem(ANSWER_KEY);\n         const data = JSON.parse(value);\n         if (data != null){\n              const returnVal = Object.keys(data).filter((value) => value.split(\" \")[0] === route.params.deck.title)\n              .map((s) => data[s]);\n    \n            setFromDb(Object.values(returnVal));\n    \n            if (Object.keys(returnVal).length === QuestionList.length) \n            {\n              setDisplayResult(true);\n            } \n            else if (Object.keys(returnVal).length > 0) \n            {\n              setIndex(Object.keys(returnVal).length);\n            }\n         }\n         else {\n            console.log(\"Your data value is Null\")\n        }\n      } catch (error) {\n        console.log(\"Error is:\",error);\n      }\n    }\n  }, []);\n\n  let selectedQuestion;\n  if (QuestionList.length !== 0) {\n    selectedQuestion = QuestionList[index];\n  }\n  const handleReset=()=>{\n    ClearAnswer(route.params.deck.title)\n    setDisplayResult(false)\n    setFromDb([])\n    setIndex(0)\n  }\n\n  const handleAnswer = (text) => {\n    AnswerQuestion({\n      deck: route.params.deck.title,\n      question: selectedQuestion.question,\n      passed: text,\n    });\n\n    const data = fromDb;\n    if (data) {\n      data.push(text);\n      setFromDb(data);\n    }\n    if (index + 1 === QuestionList.length) {\n      setDisplayResult(true);\n      clearLocalNotification()\n      setLocalNotification()\n    } else {\n      setIndex(index + 1);\n    }\n  };\n\n  return (\n    <View style={Styles.main}>\n      {QuestionList.length === 0 ? (\n        <View style={Styles.VerticalAlignCenter}>\n          <Text style={Styles.deckTexts}>\n            Sorry You can not take a quiz, because there are no cards in the\n            deck\n          </Text>\n        </View>\n      ) : displayResult ? (\n        <View style={{ flex: 1 }}>\n          <View style={Styles.VerticalAlignCenter}>\n            <Text style={Styles.deckTexts}>\n              passed\n              {\" \" + JSON.stringify(fromDb.filter((s) => s === true).length)}/\n              {JSON.stringify(fromDb.length)}\n            </Text>\n            <View style={{ marginTop: 50 }}>\n            <TouchableOpacity onPress={handleReset}>\n              <Text style={Styles.button}>Restart Quiz</Text>\n            </TouchableOpacity>\n\n\n            <TouchableOpacity onPress={() => navigation.navigate(\"DeckDetail\",{deck:route.params.deck})}>\n              <Text\n                style={[Styles.button, { color: \"gray\", borderColor: \"gray\" }]}\n              >\n                Back to Deck\n              </Text>\n            </TouchableOpacity>\n          </View>\n          </View>\n        </View>\n      ) : (\n        <View style={{ flex: 1 }}>\n          <Text>\n            {index + 1}/{QuestionList.length}\n          </Text>\n          <View style={Styles.VerticalAlignCenter}>\n            {displayQuestion ? (\n              <Text style={Styles.deckTexts}>{selectedQuestion.question}</Text>\n            ) : (\n              <Text style={Styles.deckTexts}>{selectedQuestion.answer}</Text>\n            )}\n            <TouchableOpacity\n              onPress={() => setDisplayQuestion(!displayQuestion)}\n            >\n              {displayQuestion ? (\n                <Text style={Styles.subButton}>Answer</Text>\n              ) : (\n                <Text style={Styles.subButton}>question</Text>\n              )}\n            </TouchableOpacity>\n          </View>\n          <View style={{ marginBottom: 50 }}>\n            <TouchableOpacity onPress={() => handleAnswer(true)}>\n              <Text style={Styles.button}>Correct</Text>\n            </TouchableOpacity>\n            <TouchableOpacity onPress={() => handleAnswer(false)}>\n              <Text\n                style={[Styles.button, { color: \"red\", borderColor: \"red\" }]}\n              >\n                Incorrect\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n};\n\nexport default StartQuiz;"]},"metadata":{},"sourceType":"module"}